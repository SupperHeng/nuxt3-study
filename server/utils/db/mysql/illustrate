# I am using Docker's mysql container here

# 
# # docker:
# 
docker run -d \
--name mysql8 \
-v /data/mysql8:/var/lib/mysql \
-e MYSQL_ROOT_PASSWORD="symxll" \
-p 3306:3306 \
--restart always \
mysql:latest

# 
# # dataBase:
# 

# mysql:
  CREATE DATABASE jbook;
  USE jbook;

# sql:
  # 1.notebook_notes
  DROP TABLE IF EXISTS `notebook_notes`;
  CREATE TABLE `notebook_notes` (
    `id` int unsigned NOT NULL AUTO_INCREMENT,
    `notebook_id` int NOT NULL DEFAULT '0' COMMENT '⽂集id',
    `note_id` int NOT NULL DEFAULT '0' COMMENT '⽂章id',
    `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`) USING BTREE
  ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

  # 2.notebooks
  DROP TABLE IF EXISTS `notebooks`;
  CREATE TABLE `notebooks` (
    `id` int unsigned NOT NULL AUTO_INCREMENT,
    `uid` int unsigned NOT NULL DEFAULT '0' COMMENT '关联⽤户id',
    `name` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '⽂集名称',
    `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`) USING BTREE
  ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

  # 3.notes
  DROP TABLE IF EXISTS `notes`;
  CREATE TABLE `notes` (
    `id` int unsigned NOT NULL AUTO_INCREMENT,
    `uid` int unsigned NOT NULL DEFAULT '0' COMMENT '关联⽤户id',
    `title` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '' COMMENT '⽂章名',
    `content_md` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '⽂章内容',
    `state` tinyint NOT NULL,
    `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`) USING BTREE
  ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;


